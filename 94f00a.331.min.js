(window.webpackJsonp=window.webpackJsonp||[]).push([[331],{1134:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),l=t(1169);a.default=function(e){const[a,t]=Object(n.useState)(!1),[c,r]=Object(n.useState)(!1);localStorage.getItem("arco-lang");return s.a.createElement("span",{style:e.style,className:"markdown-body"},s.a.createElement(l.a,null,s.a.createElement("title",null,"Permission Control | SensoroDesign"),s.a.createElement("meta",{name:"description",content:"Permission control is a very common basic function in middle and background scenarios. In `v2.1.0`, the permission control function is integrated into Arco Design Pro"}),s.a.createElement("meta",{property:"og:title",content:"Permission Control | SensoroDesign"}),s.a.createElement("meta",{property:"og:description",content:"Permission control is a very common basic function in middle and background scenarios. In `v2.1.0`, the permission control function is integrated into Arco Design Pro"})),s.a.createElement("div",{className:"ac-nav-intro"},s.a.createElement("p",null,"Arco Pro"),s.a.createElement("h1",{id:"permission-control"},"Permission Control"),s.a.createElement("p",null,"Permission control is a very common basic function in middle and background scenarios. In ",s.a.createElement("code",null,"v2.1.0"),", the permission control function is integrated into Arco Design Pro")),s.a.createElement("p",null,s.a.createElement("em",null,"Auto translate by google.")),s.a.createElement("h2",{id:"applicable-scene"},"Applicable scene"),s.a.createElement("p",null,"The common front-end permission control in the middle and background can be roughly summarized as the following scenarios:"),s.a.createElement("ol",null,s.a.createElement("li",null,"Menu permission control, manage permissions for ",s.a.createElement("strong",null,"a certain menu/page"),", if there are any, you can see this page, otherwise it will show no permission.")),s.a.createElement("p",null,s.a.createElement("img",{src:"http://p1-arco.byteimg.com/tos-cn-i-uwbnlip3yd/116622141d7b228ad2259c81cd32d095.gif~tplv-uwbnlip3yd-3.awebp",alt:""})),s.a.createElement("ol",{start:"2"},s.a.createElement("li",null,s.a.createElement("strong",null,"Manage permissions for a trigger")," in a page, such as deleting a piece of data on a list page. If you have permission, the delete button will be displayed.")),s.a.createElement("p",null,s.a.createElement("img",{src:"http://p1-arco.byteimg.com/tos-cn-i-uwbnlip3yd/7b410fa5dad6e47665c264fae910c0c8.gif~tplv-uwbnlip3yd-3.awebp",alt:""})),s.a.createElement("ol",{start:"3"},s.a.createElement("li",null,s.a.createElement("strong",null,"Perform permission management for a certain page and a certain trigger")," of an object, such as the deletion of data on a list page and the content genre is graphic and text. Display the delete button for this data if you have permission.")),s.a.createElement("p",null,"Arco Design Pro is trying its best to meet the above scenarios."),s.a.createElement("h2",{id:"implementation"},"Implementation"),s.a.createElement("p",null,"In implementation, a permission permission is mapped to two fields, ",s.a.createElement("code",null,"resource")," and ",s.a.createElement("code",null,"action"),"."),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("code",null,"resource"),": a page, a trigger, a trigger of an element can be used as a ",s.a.createElement("code",null,"resource"),"."),s.a.createElement("li",null,s.a.createElement("code",null,"action"),": the specific behavior of the user, such as: read operation, write operation.")),s.a.createElement("p",null,"Therefore, the design of the permission field in the user information is as follows:"),s.a.createElement("pre",{className:"code_block"},s.a.createElement("code",{className:"language-ts"},s.a.createElement("span",{className:"token doc-comment comment"},"/**",s.a.createElement("br",null)," * ",s.a.createElement("span",{className:"token punctuation"},"{")," data-analysis:  ['read', 'write'] ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null)," */"),s.a.createElement("br",null),s.a.createElement("span",{className:"token keyword"},"export")," ",s.a.createElement("span",{className:"token keyword"},"type")," ",s.a.createElement("span",{className:"token class-name"},"UserPermission")," ",s.a.createElement("span",{className:"token operator"},"=")," Record",s.a.createElement("span",{className:"token operator"},"<"),s.a.createElement("span",{className:"token builtin"},"string"),s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token builtin"},"string"),s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token operator"},">"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("br",null),"userInfo",s.a.createElement("span",{className:"token punctuation"},"."),"permission ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token string"},"'data-analysis'"),s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token string"},"'read'"),s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token string"},"'write'"),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token string"},"'search-table'"),s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token string"},"'read'"),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},";"))),s.a.createElement("p",null,"In terms of authority judgment, Arco Design Pro not only supports direct ",s.a.createElement("code",null,"resource")," string judgment, but also supports regular matching ",s.a.createElement("code",null,"resource"),". in order to cover more scenarios. The specific code for authority judgment is in ",s.a.createElement("code",null,"@/utils/authentication.ts"),", which is briefly explained below."),s.a.createElement("pre",{className:"code_block"},s.a.createElement("code",{className:"language-ts"},s.a.createElement("span",{className:"token keyword"},"type")," ",s.a.createElement("span",{className:"token class-name"},"Auth")," ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"  resource",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token builtin"},"string")," ",s.a.createElement("span",{className:"token operator"},"|")," RegExp",s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  actions",s.a.createElement("span",{className:"token operator"},"?"),s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token builtin"},"string"),s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"token keyword"},"interface")," ",s.a.createElement("span",{className:"token class-name"},"AuthParams")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token comment"},"// Array of permissions required for an operation"),s.a.createElement("br",null),"  requiredPermissions",s.a.createElement("span",{className:"token operator"},"?"),s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token builtin"},"Array"),s.a.createElement("span",{className:"token operator"},"<"),"Auth",s.a.createElement("span",{className:"token operator"},">"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token comment"},"// Whether one needs to be satisfied, that is or is and."),s.a.createElement("br",null),"  oneOfPerm",s.a.createElement("span",{className:"token operator"},"?"),s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token builtin"},"boolean"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"token doc-comment comment"},"/**",s.a.createElement("br",null)," * Authenticate an operation on a resource",s.a.createElement("br",null)," * actions: Action permissions required by the current resource",s.a.createElement("br",null)," * perm: the permissions the user has on the current resource",s.a.createElement("br",null)," **/"),s.a.createElement("br",null),s.a.createElement("span",{className:"token keyword"},"const")," ",s.a.createElement("span",{className:"token function-variable function"},"judge")," ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token punctuation"},"("),"actions",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token builtin"},"string"),s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},",")," perm",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token builtin"},"string"),s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"=>")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword"},"if")," ",s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token operator"},"!"),"perm ",s.a.createElement("span",{className:"token operator"},"||")," ",s.a.createElement("span",{className:"token operator"},"!"),"perm",s.a.createElement("span",{className:"token punctuation"},"."),"length",s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token keyword"},"return")," ",s.a.createElement("span",{className:"token boolean"},"false"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token comment"},"// The user has full permissions to this resource."),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token comment"},"// perm = ['*']"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword"},"if")," ",s.a.createElement("span",{className:"token punctuation"},"("),"perm",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"join"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token string"},"''"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"===")," ",s.a.createElement("span",{className:"token string"},"'*'"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token keyword"},"return")," ",s.a.createElement("span",{className:"token boolean"},"true"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword"},"return")," actions",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"every"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},"("),"action",s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"=>")," perm",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"includes"),s.a.createElement("span",{className:"token punctuation"},"("),"action",s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"token doc-comment comment"},"/**",s.a.createElement("br",null)," * Authenticate to a resource",s.a.createElement("br",null)," * params: resource + actions",s.a.createElement("br",null)," * userPermission: the permissions the user has",s.a.createElement("br",null)," **/"),s.a.createElement("br",null),s.a.createElement("span",{className:"token keyword"},"const")," ",s.a.createElement("span",{className:"token function-variable function"},"auth")," ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token punctuation"},"("),"params",s.a.createElement("span",{className:"token operator"},":")," Auth",s.a.createElement("span",{className:"token punctuation"},",")," userPermission",s.a.createElement("span",{className:"token operator"},":")," UserPermission",s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"=>")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword"},"const")," ",s.a.createElement("span",{className:"token punctuation"},"{")," resource",s.a.createElement("span",{className:"token punctuation"},",")," actions ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token punctuation"},"]")," ",s.a.createElement("span",{className:"token punctuation"},"}")," ",s.a.createElement("span",{className:"token operator"},"=")," params",s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token comment"},"// current resource is a regular"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword"},"if")," ",s.a.createElement("span",{className:"token punctuation"},"("),"resource ",s.a.createElement("span",{className:"token keyword"},"instanceof")," ",s.a.createElement("span",{className:"token class-name"},"RegExp"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token keyword"},"const")," permKeys ",s.a.createElement("span",{className:"token operator"},"=")," Object",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"keys"),s.a.createElement("span",{className:"token punctuation"},"("),"userPermission",s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token comment"},"// Get the resource that the user matches"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token keyword"},"const")," matchPermissions ",s.a.createElement("span",{className:"token operator"},"=")," permKeys",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"filter"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},"("),"item",s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"=>")," item",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"match"),s.a.createElement("span",{className:"token punctuation"},"("),"resource",s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token comment"},"// Judge the permissions of all matching resources."),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token keyword"},"return")," matchPermissions",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"every"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},"("),"key",s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"=>")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token keyword"},"const")," perm ",s.a.createElement("span",{className:"token operator"},"=")," userPermission",s.a.createElement("span",{className:"token punctuation"},"["),"key",s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token keyword"},"return")," ",s.a.createElement("span",{className:"token function"},"judge"),s.a.createElement("span",{className:"token punctuation"},"("),"actions",s.a.createElement("span",{className:"token punctuation"},",")," perm",s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token comment"},"// resource is a simple string."),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword"},"const")," perm ",s.a.createElement("span",{className:"token operator"},"=")," userPermission",s.a.createElement("span",{className:"token punctuation"},"["),"resource",s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword"},"return")," ",s.a.createElement("span",{className:"token function"},"judge"),s.a.createElement("span",{className:"token punctuation"},"("),"actions",s.a.createElement("span",{className:"token punctuation"},",")," perm",s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"token doc-comment comment"},"/**",s.a.createElement("br",null)," * Multiple resource combination authentication",s.a.createElement("br",null)," * params: resource + actions array",s.a.createElement("br",null)," * userPermission: user permission",s.a.createElement("br",null)," **/"),s.a.createElement("br",null),s.a.createElement("span",{className:"token keyword"},"export")," ",s.a.createElement("span",{className:"token keyword"},"default")," ",s.a.createElement("span",{className:"token punctuation"},"("),"params",s.a.createElement("span",{className:"token operator"},":")," AuthParams",s.a.createElement("span",{className:"token punctuation"},",")," userPermission",s.a.createElement("span",{className:"token operator"},":")," UserPermission",s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"=>")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword"},"const")," ",s.a.createElement("span",{className:"token punctuation"},"{")," requiredPermissions",s.a.createElement("span",{className:"token punctuation"},",")," oneOfPerm ",s.a.createElement("span",{className:"token punctuation"},"}")," ",s.a.createElement("span",{className:"token operator"},"=")," params",s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword"},"if")," ",s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token builtin"},"Array"),s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"isArray"),s.a.createElement("span",{className:"token punctuation"},"("),"requiredPermissions",s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"&&")," requiredPermissions",s.a.createElement("span",{className:"token punctuation"},"."),"length",s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token keyword"},"let")," count ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token number"},"0"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token keyword"},"for")," ",s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token keyword"},"const")," rp ",s.a.createElement("span",{className:"token keyword"},"of")," requiredPermissions",s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token keyword"},"if")," ",s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token function"},"auth"),s.a.createElement("span",{className:"token punctuation"},"("),"rp",s.a.createElement("span",{className:"token punctuation"},",")," userPermission",s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"        count",s.a.createElement("span",{className:"token operator"},"++"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token comment"},"// or operation or and operation"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token keyword"},"return")," oneOfPerm ",s.a.createElement("span",{className:"token operator"},"?")," count ",s.a.createElement("span",{className:"token operator"},">")," ",s.a.createElement("span",{className:"token number"},"0")," ",s.a.createElement("span",{className:"token operator"},":")," count ",s.a.createElement("span",{className:"token operator"},"===")," requiredPermissions",s.a.createElement("span",{className:"token punctuation"},"."),"length",s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token keyword"},"return")," ",s.a.createElement("span",{className:"token boolean"},"true"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},";"))),s.a.createElement("h2",{id:"use"},"use"),s.a.createElement("h3",{id:"menu-permission-management"},"Menu permission management"),s.a.createElement("p",null,"For menu and routing permission control, you can add the ",s.a.createElement("code",null,"requiredPermissions")," parameter to a menu item in ",s.a.createElement("code",null,"routes.ts"),"."),s.a.createElement("pre",{className:"code_block"},s.a.createElement("code",{className:"language-ts"},s.a.createElement("span",{className:"token keyword"},"const")," routes ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"    name",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token string"},"'menu.visualization'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"    key",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token string"},"'visualization'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"    children",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"        name",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token string"},"'menu.visualization.dataAnalysis'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"        key",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token string"},"'visualization/data-analysis'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"        requiredPermissions",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"token punctuation"},"{")," resource",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token string"},"'menu.visualization.dataAnalysis'"),s.a.createElement("span",{className:"token punctuation"},",")," actions",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token string"},"'read'"),s.a.createElement("span",{className:"token punctuation"},"]")," ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"        name",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token string"},"'menu.visualization.multiDimensionDataAnalysis'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"        key",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token string"},"'visualization/multi-dimension-data-analysis'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"        requiredPermissions",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"            resource",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token string"},"'menu.visualization.dataAnalysis'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"            actions",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token string"},"'read'"),s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token string"},"'write'"),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"            resource",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token string"},"'menu.visualization.multiDimensionDataAnalysis'"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"            actions",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token string"},"'write'"),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"        oneOfPerm",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token boolean"},"true"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},";"))),s.a.createElement("h3",{id:"a-button-permission-management"},"A button permission management"),s.a.createElement("p",null,"Arco Design Pro encapsulates the ",s.a.createElement("code",null,"PermissionWrapper")," component, which can wrap fixed elements for permission management"),s.a.createElement("pre",{className:"code_block"},s.a.createElement("code",{className:"language-ts"},s.a.createElement("span",{className:"token keyword"},"import")," PermissionWrapper ",s.a.createElement("span",{className:"token keyword"},"from")," ",s.a.createElement("span",{className:"token string"},"'@/components/permissionWrapper'"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"token keyword"},"return")," ",s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token operator"},"<"),"PermissionWrapper",s.a.createElement("br",null),"    requiredPermissions",s.a.createElement("span",{className:"token operator"},"="),s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token punctuation"},"{")," resource",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token regex"},s.a.createElement("span",{className:"token regex-delimiter"},"/"),s.a.createElement("span",{className:"token regex-source language-regex"},s.a.createElement("span",{className:"token anchor function"},"^"),"menu",s.a.createElement("span",{className:"token charclass class-name"},"."),"list",s.a.createElement("span",{className:"token charclass class-name"},"."),s.a.createElement("span",{className:"token quantifier number"},"*")),s.a.createElement("span",{className:"token regex-delimiter"},"/")),s.a.createElement("span",{className:"token punctuation"},",")," actions",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token string"},"'write'"),s.a.createElement("span",{className:"token punctuation"},"]")," ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token operator"},">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token operator"},"<"),"Button loading",s.a.createElement("span",{className:"token operator"},"="),s.a.createElement("span",{className:"token punctuation"},"{"),"loading",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token operator"},">"),"删除",s.a.createElement("span",{className:"token operator"},"<"),s.a.createElement("span",{className:"token operator"},"/"),"Button",s.a.createElement("span",{className:"token operator"},">"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token operator"},"<"),s.a.createElement("span",{className:"token operator"},"/"),"PermissionWrapper",s.a.createElement("span",{className:"token operator"},">"),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"))),s.a.createElement("h3",{id:"permission-management-for-a-button-of-a-card"},"Permission management for a button of a card"),s.a.createElement("p",null,"This kind of permission management that requires specific objects only needs to be more detailed in ",s.a.createElement("code",null,"resource"),"."),s.a.createElement("pre",{className:"code_block"},s.a.createElement("code",{className:"language-ts"},s.a.createElement("span",{className:"token keyword"},"import")," PermissionWrapper ",s.a.createElement("span",{className:"token keyword"},"from")," ",s.a.createElement("span",{className:"token string"},"'@/components/permissionWrapper'"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"token keyword"},"return")," ",s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token operator"},"<"),"div",s.a.createElement("span",{className:"token operator"},">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token punctuation"},"{"),"data",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"map"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},"("),"item",s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"=>")," ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token keyword"},"const")," ",s.a.createElement("span",{className:"token punctuation"},"{")," key",s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token operator"},"..."),"rest ",s.a.createElement("span",{className:"token punctuation"},"}")," ",s.a.createElement("span",{className:"token operator"},"=")," item",s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token keyword"},"return")," ",s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"token operator"},"<"),"PermissionWrapper",s.a.createElement("br",null),"          requiredPermissions",s.a.createElement("span",{className:"token operator"},"="),s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"token punctuation"},"{")," resource",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token template-string"},s.a.createElement("span",{className:"token template-punctuation string"},"`"),s.a.createElement("span",{className:"token string"},"list-card-"),s.a.createElement("span",{className:"token interpolation"},s.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"$","{"),"key",s.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"}")),s.a.createElement("span",{className:"token template-punctuation string"},"`")),s.a.createElement("span",{className:"token punctuation"},",")," actions",s.a.createElement("span",{className:"token operator"},":")," ",s.a.createElement("span",{className:"token punctuation"},"["),s.a.createElement("span",{className:"token string"},"'write'"),s.a.createElement("span",{className:"token punctuation"},"]")," ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},","),s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"token punctuation"},"]"),s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"token operator"},">"),s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"token operator"},"<"),"Card ",s.a.createElement("span",{className:"token punctuation"},"{"),s.a.createElement("span",{className:"token operator"},"..."),"rest",s.a.createElement("span",{className:"token punctuation"},"}")," ",s.a.createElement("span",{className:"token operator"},"/"),s.a.createElement("span",{className:"token operator"},">"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"token operator"},"<"),s.a.createElement("span",{className:"token operator"},"/"),"PermissionWrapper",s.a.createElement("span",{className:"token operator"},">"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"token operator"},"<"),s.a.createElement("span",{className:"token operator"},"/"),"div",s.a.createElement("span",{className:"token operator"},">"),s.a.createElement("br",null),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"))),s.a.createElement("p",null,"The above is the specific method of using the front-end page for permission control, but it needs to combine the back-end interface to return the specific permissions owned by the user to the front-end."),s.a.createElement("p",null,"At the same time, in the middle and back-end systems, it is far from enough to have simple front-end permission control, and the back-end is also required to perform interface permission control. In particular, some interfaces involving write operations need to strictly control permissions."))}}}]);