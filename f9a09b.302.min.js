(window.webpackJsonp=window.webpackJsonp||[]).push([[302],{1155:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),s=t(1169);a.default=function(e){const[a,t]=Object(n.useState)(!1),[c,r]=Object(n.useState)(!1);localStorage.getItem("arco-lang");return l.a.createElement("span",{style:e.style,className:"markdown-body"},l.a.createElement(s.a,null,l.a.createElement("title",null,"模板开发 | ArcoDesign"),l.a.createElement("meta",{name:"description",content:"学习如何开发自定义物料模板。"}),l.a.createElement("meta",{property:"og:title",content:"模板开发 | ArcoDesign"}),l.a.createElement("meta",{property:"og:description",content:"学习如何开发自定义物料模板。"})),l.a.createElement("div",{className:"ac-nav-intro"},l.a.createElement("p",null,"物料平台"),l.a.createElement("h1",{id:"模板开发"},"模板开发"),l.a.createElement("p",null,"学习如何开发自定义物料模板。")),l.a.createElement("p",null,"Arco 官方提供了多种物料模板，当它们无法满足你的需求的时，你可以开发自己的物料模板。推荐基于 Arco 官方的物料项目进行修改，再将其转制为物料模板。"),l.a.createElement("h2",{id:"将项目转制为模板"},l.a.createElement("strong",null,"将项目转制为模板")),l.a.createElement("p",null,"假定你已经有一个二次开发过的 Arco 物料项目，通过 ",l.a.createElement("code",null,"arco template --create")," 命令可以快速将其转制为一个模板。"),l.a.createElement("pre",null,l.a.createElement("code",null,"$ arco template ",l.a.createElement("span",{className:"token operator"},"-"),l.a.createElement("span",{className:"token operator"},"-"),"create",l.a.createElement("br",null),l.a.createElement("br",null),"        ___                    ____            _",l.a.createElement("br",null),"       ",l.a.createElement("span",{className:"token operator"},"/"),"   |  ______________  ",l.a.createElement("span",{className:"token operator"},"/")," __ \\___  ",l.a.createElement("span",{className:"token function"},"_____"),l.a.createElement("span",{className:"token punctuation"},"("),"_",l.a.createElement("span",{className:"token punctuation"},")"),"___ _____",l.a.createElement("br",null),"      ",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/"),"| | ",l.a.createElement("span",{className:"token operator"},"/")," ___",l.a.createElement("span",{className:"token operator"},"/")," ___",l.a.createElement("span",{className:"token operator"},"/")," __ \\",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/")," _ \\",l.a.createElement("span",{className:"token operator"},"/")," ___",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/")," __ `",l.a.createElement("span",{className:"token operator"},"/")," __ \\",l.a.createElement("br",null),"     ",l.a.createElement("span",{className:"token operator"},"/")," ___ |",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/"),"  ",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/"),"__",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/"),"_",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/"),"_",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/"),"  ",l.a.createElement("span",{className:"token function"},"__"),l.a.createElement("span",{className:"token punctuation"},"("),"__  ",l.a.createElement("span",{className:"token punctuation"},")")," ",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/"),"_",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/"),l.a.createElement("br",null),"    ",l.a.createElement("span",{className:"token operator"},"/"),"_",l.a.createElement("span",{className:"token operator"},"/"),"  |_",l.a.createElement("span",{className:"token operator"},"/"),"_",l.a.createElement("span",{className:"token operator"},"/"),"   \\___",l.a.createElement("span",{className:"token operator"},"/"),"\\____",l.a.createElement("span",{className:"token operator"},"/"),"_____",l.a.createElement("span",{className:"token operator"},"/"),"\\___",l.a.createElement("span",{className:"token operator"},"/"),"____",l.a.createElement("span",{className:"token operator"},"/"),"_",l.a.createElement("span",{className:"token operator"},"/"),"\\__",l.a.createElement("span",{className:"token punctuation"},",")," ",l.a.createElement("span",{className:"token operator"},"/"),"_",l.a.createElement("span",{className:"token operator"},"/")," ",l.a.createElement("span",{className:"token operator"},"/"),"_",l.a.createElement("span",{className:"token operator"},"/"),l.a.createElement("br",null),"                                             ",l.a.createElement("span",{className:"token operator"},"/"),"____",l.a.createElement("span",{className:"token operator"},"/"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{className:"token operator"},"?")," 请输入作为模板的现有项目路径 ",l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token operator"},"/"),"hello",l.a.createElement("span",{className:"token operator"},"-"),"arco",l.a.createElement("br",null),l.a.createElement("span",{className:"token operator"},"?")," 请输入生成模板的目标路径 ",l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token operator"},"/"),"my",l.a.createElement("span",{className:"token operator"},"-"),"template",l.a.createElement("br",null),l.a.createElement("span",{className:"token operator"},"?")," 生成的模板是否用于 monorepo 项目",l.a.createElement("span",{className:"token operator"},"?")," No",l.a.createElement("br",null),l.a.createElement("span",{className:"token operator"},"?")," 请输入此模板的 NPM 包名 my",l.a.createElement("span",{className:"token operator"},"-"),"template",l.a.createElement("br",null),"✔ 项目内容拷贝完成！",l.a.createElement("br",null),"✔ 转化模板成功！")),l.a.createElement("p",null,"生成的模板目录结构如下，",l.a.createElement("strong",null,"请确保模板中无副作用产物（如打包产物等）")," ："),l.a.createElement("pre",null,l.a.createElement("code",null,l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("br",null),"├── package",l.a.createElement("span",{className:"token punctuation"},"."),"json",l.a.createElement("br",null),"└── template",l.a.createElement("br",null),"    ├── ",l.a.createElement("span",{className:"token punctuation"},"."),"config",l.a.createElement("br",null),"    ├── ",l.a.createElement("span",{className:"token punctuation"},"."),"eslintignore",l.a.createElement("br",null),"    ├── ",l.a.createElement("span",{className:"token punctuation"},"."),"eslintrc",l.a.createElement("br",null),"    ├── ",l.a.createElement("span",{className:"token punctuation"},"."),"prettierrc",l.a.createElement("br",null),"    ├── ",l.a.createElement("span",{className:"token punctuation"},"."),"storybook",l.a.createElement("br",null),"    ├── ",l.a.createElement("span",{className:"token punctuation"},"."),"stylelintignore",l.a.createElement("br",null),"    ├── ",l.a.createElement("span",{className:"token punctuation"},"."),"stylelintrc",l.a.createElement("br",null),"    ├── README",l.a.createElement("span",{className:"token punctuation"},"."),"md",l.a.createElement("br",null),"    ├── gitignore",l.a.createElement("br",null),"    ├── package",l.a.createElement("span",{className:"token punctuation"},"."),"json",l.a.createElement("br",null),"    ├── src",l.a.createElement("br",null),"    ├── stories",l.a.createElement("br",null),"    ├── tests",l.a.createElement("br",null),"    └── tsconfig",l.a.createElement("span",{className:"token punctuation"},"."),"json")),l.a.createElement("h2",{id:"添加-hook"},l.a.createElement("strong",null,"添加 HOOK")),l.a.createElement("p",null,"在 ",l.a.createElement("code",null,"arco init")," 初始化项目完成之后，会尝试执行模板自定义的钩子函数，你可以在此自定义帮助信息、执行项目构建等。在项目的根目录添加 ",l.a.createElement("code",null,"hook/after-init.js"),", 下边是一个钩子函数示例："),l.a.createElement("pre",{className:"code_block"},l.a.createElement("code",{className:"language-javascript"},l.a.createElement("span",{className:"token comment"},"// hook/after-init.js"),l.a.createElement("br",null),l.a.createElement("span",{className:"token keyword"},"const")," ",l.a.createElement("span",{className:"token punctuation"},"{")," spawn ",l.a.createElement("span",{className:"token punctuation"},"}")," ",l.a.createElement("span",{className:"token operator"},"=")," ",l.a.createElement("span",{className:"token function"},"require"),l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token string"},"'child_process'"),l.a.createElement("span",{className:"token punctuation"},")"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{className:"token keyword"},"const")," ",l.a.createElement("span",{className:"token function-variable function"},"logInfo")," ",l.a.createElement("span",{className:"token operator"},"=")," ",l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token parameter"},"messages"),l.a.createElement("span",{className:"token punctuation"},")")," ",l.a.createElement("span",{className:"token arrow operator"},"=>")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"  messages",l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token method function property-access"},"forEach"),l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token parameter"},"m"),l.a.createElement("span",{className:"token punctuation"},")")," ",l.a.createElement("span",{className:"token arrow operator"},"=>")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"    ",l.a.createElement("span",{className:"token console class-name"},"console"),l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token method function property-access"},"log"),l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token template-string"},l.a.createElement("span",{className:"token template-punctuation string"},"`"),l.a.createElement("span",{className:"token string"},"\\x1B[32m"),l.a.createElement("span",{className:"token interpolation"},l.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"$","{"),"m",l.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"}")),l.a.createElement("span",{className:"token string"},"\\x1B[0m"),l.a.createElement("span",{className:"token template-punctuation string"},"`")),l.a.createElement("span",{className:"token punctuation"},")"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token punctuation"},"}"),l.a.createElement("span",{className:"token punctuation"},")"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),l.a.createElement("span",{className:"token punctuation"},"}"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),l.a.createElement("br",null),"module",l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token method-variable function-variable method function property-access"},"exports")," ",l.a.createElement("span",{className:"token operator"},"=")," ",l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token parameter"},l.a.createElement("span",{className:"token punctuation"},"{")," projectName",l.a.createElement("span",{className:"token punctuation"},",")," isForMonorepo ",l.a.createElement("span",{className:"token punctuation"},"}")),l.a.createElement("span",{className:"token punctuation"},")")," ",l.a.createElement("span",{className:"token arrow operator"},"=>")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token keyword control-flow"},"return")," ",l.a.createElement("span",{className:"token keyword"},"new")," ",l.a.createElement("span",{className:"token class-name"},"Promise"),l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token parameter"},"resolve",l.a.createElement("span",{className:"token punctuation"},",")," reject"),l.a.createElement("span",{className:"token punctuation"},")")," ",l.a.createElement("span",{className:"token arrow operator"},"=>")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"    ",l.a.createElement("span",{className:"token function"},"spawn"),l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token string"},"'npm'"),l.a.createElement("span",{className:"token punctuation"},",")," ",l.a.createElement("span",{className:"token punctuation"},"["),l.a.createElement("span",{className:"token string"},"'run'"),l.a.createElement("span",{className:"token punctuation"},",")," ",l.a.createElement("span",{className:"token string"},"'build'"),l.a.createElement("span",{className:"token punctuation"},"]"),l.a.createElement("span",{className:"token punctuation"},",")," ",l.a.createElement("span",{className:"token punctuation"},"{")," stdio",l.a.createElement("span",{className:"token operator"},":")," ",l.a.createElement("span",{className:"token string"},"'inherit'")," ",l.a.createElement("span",{className:"token punctuation"},"}"),l.a.createElement("span",{className:"token punctuation"},")"),l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token method function property-access"},"on"),l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token string"},"'close'"),l.a.createElement("span",{className:"token punctuation"},",")," ",l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token parameter"},"code"),l.a.createElement("span",{className:"token punctuation"},")")," ",l.a.createElement("span",{className:"token arrow operator"},"=>")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"      ",l.a.createElement("span",{className:"token keyword control-flow"},"if")," ",l.a.createElement("span",{className:"token punctuation"},"("),"code",l.a.createElement("span",{className:"token punctuation"},")")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"        ",l.a.createElement("span",{className:"token function"},"reject"),l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token punctuation"},")"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),"      ",l.a.createElement("span",{className:"token punctuation"},"}")," ",l.a.createElement("span",{className:"token keyword control-flow"},"else")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"        ",l.a.createElement("span",{className:"token keyword control-flow"},"if")," ",l.a.createElement("span",{className:"token punctuation"},"("),"isForMonorepo",l.a.createElement("span",{className:"token punctuation"},")")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"          ",l.a.createElement("span",{className:"token function"},"logInfo"),l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token punctuation"},"["),l.a.createElement("br",null),"            ",l.a.createElement("span",{className:"token string"},"'******************************************************************'"),l.a.createElement("span",{className:"token punctuation"},","),l.a.createElement("br",null),"            ",l.a.createElement("span",{className:"token string"},"'  你可以在 Lerna 根目录重新执行以下命令，预览所有项目'"),l.a.createElement("span",{className:"token punctuation"},","),l.a.createElement("br",null),"            ",l.a.createElement("span",{className:"token template-string"},l.a.createElement("span",{className:"token template-punctuation string"},"`"),l.a.createElement("span",{className:"token string"},"    $ npm run dev"),l.a.createElement("span",{className:"token template-punctuation string"},"`")),l.a.createElement("span",{className:"token punctuation"},","),l.a.createElement("br",null),"            ",l.a.createElement("span",{className:"token string"},"'******************************************************************'"),l.a.createElement("span",{className:"token punctuation"},","),l.a.createElement("br",null),"          ",l.a.createElement("span",{className:"token punctuation"},"]"),l.a.createElement("span",{className:"token punctuation"},")"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),"        ",l.a.createElement("span",{className:"token punctuation"},"}")," ",l.a.createElement("span",{className:"token keyword control-flow"},"else")," ",l.a.createElement("span",{className:"token punctuation"},"{"),l.a.createElement("br",null),"          ",l.a.createElement("span",{className:"token function"},"logInfo"),l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token punctuation"},"["),l.a.createElement("br",null),"            ",l.a.createElement("span",{className:"token string"},"'******************************************************************'"),l.a.createElement("span",{className:"token punctuation"},","),l.a.createElement("br",null),"            ",l.a.createElement("span",{className:"token string"},"'  你可以执行如下命令，启动项目'"),l.a.createElement("span",{className:"token punctuation"},","),l.a.createElement("br",null),"            ",l.a.createElement("span",{className:"token template-string"},l.a.createElement("span",{className:"token template-punctuation string"},"`"),l.a.createElement("span",{className:"token string"},"    $ cd "),l.a.createElement("span",{className:"token interpolation"},l.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"$","{"),"projectName",l.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"}")),l.a.createElement("span",{className:"token template-punctuation string"},"`")),l.a.createElement("span",{className:"token punctuation"},","),l.a.createElement("br",null),"            ",l.a.createElement("span",{className:"token template-string"},l.a.createElement("span",{className:"token template-punctuation string"},"`"),l.a.createElement("span",{className:"token string"},"    $ npm run dev"),l.a.createElement("span",{className:"token template-punctuation string"},"`")),l.a.createElement("span",{className:"token punctuation"},","),l.a.createElement("br",null),"            ",l.a.createElement("span",{className:"token string"},"'******************************************************************'"),l.a.createElement("span",{className:"token punctuation"},","),l.a.createElement("br",null),"          ",l.a.createElement("span",{className:"token punctuation"},"]"),l.a.createElement("span",{className:"token punctuation"},")"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),"        ",l.a.createElement("span",{className:"token punctuation"},"}"),l.a.createElement("br",null),"        ",l.a.createElement("span",{className:"token function"},"resolve"),l.a.createElement("span",{className:"token punctuation"},"("),l.a.createElement("span",{className:"token punctuation"},")"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),"      ",l.a.createElement("span",{className:"token punctuation"},"}"),l.a.createElement("br",null),"    ",l.a.createElement("span",{className:"token punctuation"},"}"),l.a.createElement("span",{className:"token punctuation"},")"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),"  ",l.a.createElement("span",{className:"token punctuation"},"}"),l.a.createElement("span",{className:"token punctuation"},")"),l.a.createElement("span",{className:"token punctuation"},";"),l.a.createElement("br",null),l.a.createElement("span",{className:"token punctuation"},"}"),l.a.createElement("span",{className:"token punctuation"},";"))),l.a.createElement("p",null,l.a.createElement("strong",null,"需要注意：",l.a.createElement("code",null,"after-init")," 中不应使用任何 NPM 依赖包 —— 此时下载的模板已经被移除，它是一个内存中的函数。")),l.a.createElement("h2",{id:"调试本地模板"},l.a.createElement("strong",null,"调试本地模板")),l.a.createElement("pre",null,l.a.createElement("code",null,"# 使用 template 参数指定本地路径作为模板",l.a.createElement("br",null),"arco init hello",l.a.createElement("span",{className:"token operator"},"-"),"arco ",l.a.createElement("span",{className:"token operator"},"-"),l.a.createElement("span",{className:"token operator"},"-"),"template file",l.a.createElement("span",{className:"token punctuation"},":"),l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token punctuation"},"."),l.a.createElement("span",{className:"token operator"},"/"),"path",l.a.createElement("span",{className:"token operator"},"/"),l.a.createElement("span",{className:"token keyword"},"to"),l.a.createElement("span",{className:"token operator"},"/"),"your",l.a.createElement("span",{className:"token operator"},"/"),"template")),l.a.createElement("h2",{id:"发布和使用模板"},l.a.createElement("strong",null,"发布和使用模板")),l.a.createElement("p",null,"模板开发调试无误后，将其发布至 NPM 后即可使用。你可以通过 ",l.a.createElement("code",null,"arco init hello-arco --template yourTemplatePackageName")," 来使用该模板初始化物料项目。"))}}}]);